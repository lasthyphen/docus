<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/integrations/prisma">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Prisma | Dijets Council Hub</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://127.0.0.1/docs/guides/integrations/prisma"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Prisma | Dijets Council Hub"><meta data-rh="true" name="description" content="Connect your Supabase postgres database to your Prisma project."><meta data-rh="true" property="og:description" content="Connect your Supabase postgres database to your Prisma project."><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="http://127.0.0.1/docs/guides/integrations/prisma"><link data-rh="true" rel="alternate" href="http://127.0.0.1/docs/guides/integrations/prisma" hreflang="en"><link data-rh="true" rel="alternate" href="http://127.0.0.1/docs/guides/integrations/prisma" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Dijets Council Hub" href="/docs/opensearch.xml">
<script src="/docs/scripts/telemetry.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.13ffe8e7.css">
<link rel="preload" href="/docs/assets/js/runtime~main.23337c97.js" as="script">
<link rel="preload" href="/docs/assets/js/main.57ad0143.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://council.dijets.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/supabase-logo-wordmark--light.svg" alt="Dijets Council Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/supabase-logo-wordmark--dark.svg" alt="Dijets Council Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/">Guides</a><a class="navbar__item navbar__link" href="/docs/reference">Reference Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://dips.dijets.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DIPs Directory</a><a href="https://github.com/Dijets-Inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-github"></a><a href="https://qowalts.dijets.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-discord"></a><a href="https://twitter.com/OfficialDijets" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-twitter"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Prisma</h1></header><p>This guide explains how to quickly connect the Postgres database provided by Supabase to a Prisma project.</p><p><a href="https://prisma.io" target="_blank" rel="noopener noreferrer">Prisma</a> is an <a href="https://github.com/prisma/prisma" target="_blank" rel="noopener noreferrer">open source</a> next-generation ORM. It consists of the following parts:</p><ul><li><strong>Prisma Client</strong>: Auto-generated and type-safe query builder for Node.js &amp; TypeScript.</li><li><strong>Prisma Migrate</strong>: Migration system.</li><li><strong>Prisma Studio</strong>: GUI to view and edit data in your database.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-get-the-connection-string-from-supabase-project-settings">Step 1: Get the connection string from Supabase project settings<a class="hash-link" href="#step-1-get-the-connection-string-from-supabase-project-settings" title="Direct link to heading">​</a></h2><p>Go to the settings page from the sidebar and navigate to the <strong>Database</strong> tab. You’ll find the database’s connection string with a placeholder for the password you provided when you created the project.
<img loading="lazy" alt="Getting the connection string" src="/docs/assets/images/zntcsh3ic91gf1gy8j73-c8662a0cb8ef924ba79d8a2d9d83018b.png" width="1552" height="910" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-testing-the-connection">Step 2: Testing the connection<a class="hash-link" href="#step-2-testing-the-connection" title="Direct link to heading">​</a></h2><p>To make sure that everything works correctly, let’s try the connection string in a Prisma project.</p><p>If you already have one, all you need to do is set the <code>DATABASE_URL</code> to the connection string (including the password) in your <code>.env</code> file, and you’re good to go.</p><p>In case you don’t have a Prisma project or this is your first time working with Prisma, you’re going to use the repo from the <a href="https://www.prisma.io/docs/getting-started/quickstart" target="_blank" rel="noopener noreferrer">quickstart</a> guide.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloning-the-starter-project">Cloning the starter project<a class="hash-link" href="#cloning-the-starter-project" title="Direct link to heading">​</a></h3><p>Navigate into a directory of your choice and run the following command in your terminal if you’re on a Windows machine:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> https://pris.ly/quickstart -L -o quickstart-main.tar.gz </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">tar</span><span class="token plain"> -zxvf quickstart-main.tar.gz quickstart-main/typescript/starter </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> move quickstart-main</span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain">typescript</span><span class="token punctuation" style="color:rgb(212, 212, 212)">\</span><span class="token plain">starter starter </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">rmdir</span><span class="token plain"> /S /Q quickstart-main </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> del /Q quickstart-main.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And if you’re using Mac OS or Linux, run the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token function" style="color:rgb(220, 220, 170)">curl</span><span class="token plain"> -L https://pris.ly/quickstart </span><span class="token operator" style="color:rgb(212, 212, 212)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">tar</span><span class="token plain"> -xz --strip</span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token number" style="color:rgb(181, 206, 168)">2</span><span class="token plain"> quickstart-main/typescript/starter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can now navigate into the directory and install the project’s dependencies:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token builtin class-name" style="color:rgb(78, 201, 176)">cd</span><span class="token plain"> starter </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-look-at-the-projects-structure">A look at the project’s structure<a class="hash-link" href="#a-look-at-the-projects-structure" title="Direct link to heading">​</a></h3><p>This project comes with TypeScript configured and has the following structure.</p><ul><li>A <code>prisma</code> directory which contains:<ul><li>A <code>dev.db</code> file: This is a SQLite database.</li><li>A <code>schema.prisma</code> file: Where we define the different database models and relations between them.</li></ul></li><li>A <code>.env</code> file: Contains the <code>DATABASE_URL</code> variable, which Prisma will use.</li><li>A <code>script.ts</code> file: where we will run some queries using Prisma Client.
This starter also comes with the following packages installed:</li><li><a href="https://www.npmjs.com/package/@prisma/client" target="_blank" rel="noopener noreferrer"><code>@prisma/client</code></a>: An auto-generated and type-safe query builder that’s <em>tailored</em> to your data.</li><li><a href="https://www.npmjs.com/package/prisma" target="_blank" rel="noopener noreferrer"><code>prisma</code></a>: Prisma’s command-line interface (CLI). It allows you to initialize new project assets, generate Prisma Client, and analyze existing database structures through introspection to automatically create your application models.<blockquote><p>Note: Prisma works with both JavaScript and TypeScript. However, to get the best possible development experience, using TypeScript is highly recommended.</p></blockquote></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-the-project-to-use-postgresql">Configuring the project to use PostgreSQL<a class="hash-link" href="#configuring-the-project-to-use-postgresql" title="Direct link to heading">​</a></h3><p>Go ahead and delete the <code>prisma/dev.db</code> file because we will be switching to PostgreSQL.
Next, inside the <code>prisma/.env</code> file, update the value of the <code>DATABASE_URL</code> variable to the connection string you got in <strong>step 1</strong>. The URL might look as follows:</p><div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># prisma/.env</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">postgres://postgres:[YOUR-PASSWORD]@db.vdbnhqozmlzdsaejdxwr.supabase.co:5432/postgres</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, inside your <code>schema.prisma</code> file, change the <code>provider</code> from “sqlite” to <code>“postgresql”</code>.
This is what your <code>schema.prisma</code> file should look like:</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">datasource db </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  provider </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> “postgresql”</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  url      </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(220, 220, 170)">env</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">“DATABASE_URL”</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">generator client </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  provider </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> “prisma</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">client</span><span class="token operator" style="color:rgb(212, 212, 212)">-</span><span class="token plain">js”</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">model Post </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  id        Int     @id @</span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">autoincrement</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  title     String</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  content   String?</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  published Boolean @</span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  author    User?   @</span><span class="token function" style="color:rgb(220, 220, 170)">relation</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">fields</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">authorId</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> references</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  authorId  Int?</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">model User </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  id    Int     @id @</span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token function" style="color:rgb(220, 220, 170)">autoincrement</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  email String  @unique</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  name  String?</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  posts Post</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To test that everything works correctly, run the following command to create a migration:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">prisma migrate dev --name init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can optionally give your migration a name, depending on the changes you made. Since this is the project’s first migration, you’re setting the <code>--name</code> flag to “init”.
If everything works correctly, you should get the following message in your terminal:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Your database is now in sync with your schema.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">:heavy_check_mark: Generated Prisma Client (2.x.x) to ./node_modules/@prisma/client in 111ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will create a <code>prisma/migrations</code> folder inside your <code>prisma</code> directory and synchronize your Prisma schema with your database schema.</p><blockquote><p>Note: if you want to skip the process of creating a migration history, you can use the <a href="https://www.prisma.io/docs/concepts/components/prisma-migrate/db-push" target="_blank" rel="noopener noreferrer"><code>db push</code></a> command instead of <code>migrate dev</code>.
If you go to your Supabase project, in the table editor, you should see that two tables have been created, a <code>Post</code> and a <code>User</code> table.
<img loading="lazy" alt="tables created in the UI" src="/docs/assets/images/7y4qq4wwvfrheti6r09u-ad8990feb50e7780aadbc9a7be4b74bf.png" width="1552" height="910" class="img_ev3q">
That’s it! You have now successfully connected a Prisma project to a PostgreSQL database hosted on Supabase and ran your first migration.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="connection-pooling-with-supabase">Connection pooling with Supabase<a class="hash-link" href="#connection-pooling-with-supabase" title="Direct link to heading">​</a></h2><p>If you’re working in a serverless environment (for example Node.js functions hosted on AWS Lambda, Vercel or Netlify Functions), you need to set up <a href="https://www.prisma.io/docs/guides/performance-and-optimization/connection-management#serverless-environments-faas" target="_blank" rel="noopener noreferrer">connection pooling</a> using a tool like <a href="https://www.pgbouncer.org/" target="_blank" rel="noopener noreferrer">PgBouncer</a>. That’s because every function invocation may result in a <a href="https://www.prisma.io/docs/guides/performance-and-optimization/connection-management#the-serverless-challenge" target="_blank" rel="noopener noreferrer">new connection to the database</a>. Supabase <a href="https://supabase.io/blog/2021/04/02/supabase-pgbouncer#what-is-connection-pooling" target="_blank" rel="noopener noreferrer">supports connection management using PgBouncer</a> and are enabled by default.
Go to the <strong>Database</strong> page from the sidebar in the Supabase dashboard and navigate to <strong>connection pool</strong> settings
<img loading="lazy" alt="Connection pool settings" src="/docs/assets/images/w0oowg8vq435ob5c3gf0-a5e6e48b04b945e436a4636fecbbf6c4.png" width="3104" height="1974" class="img_ev3q">
When running migrations you need to use the non pooled connection URL (like the one we used in <strong>step 1</strong>). However, when deploying your app, you’ll use the pooled connection URL and add the <code>?pgbouncer=true</code> flag to the PostgreSQL connection URL. To minimize the number of concurrent connections, setting the <code>connection_limit</code> to <code>1</code> is also recommended. So the URL might look as follows:</p><div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># prisma/.env</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">postgres://postgres:[YOUR-PASSWORD]@db.vdbnhqozmlzdsaejdxwr.supabase.co:6543/postgres?pgbouncer=true&amp;connection_limit=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Prisma Migrate uses database transactions to check out the current state of the database and the migrations table. However, the Migration Engine is designed to use a single connection to the database, and does not support connection pooling with PgBouncer. If you attempt to run Prisma Migrate commands in any environment that uses PgBouncer for connection pooling, you might see the following error:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Error: undefined: Database error</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Error querying the database: db error: ERROR: prepared statement “s0” already exists</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is a known issue and it is being worked on, you can follow the progress on this <a href="https://github.com/prisma/prisma/issues/6485" target="_blank" rel="noopener noreferrer">GitHub issue</a>.
If you want to learn more about Prisma, check out the <a href="https://www.prisma.io/docs" target="_blank" rel="noopener noreferrer">docs</a>. Also in case you have any questions or run into any issue, feel free to start a discussion in the repo’s <a href="https://github.com/prisma/prisma/discussions" target="_blank" rel="noopener noreferrer">discussions section</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><p>If you run <code>prisma migrate dev --name init</code> multiple times, it sometimes asks if you want to recreate the whole schema. If you chose yes, it will delete the public schema and recreate it. The default grants are missing after this. If you run into this problem, add a helper SQL for fixing the grants:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">SCHEMA</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">IF</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">EXISTS</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;auth&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">SCHEMA</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">IF</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">NOT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">EXISTS</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;extensions&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">create</span><span class="token plain"> extension </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">not</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">exists</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&quot;uuid-ossp&quot;</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> extensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">create</span><span class="token plain"> extension </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">not</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">exists</span><span class="token plain"> pgcrypto         </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> extensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">create</span><span class="token plain"> extension </span><span class="token keyword" style="color:rgb(86, 156, 214)">if</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">not</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">exists</span><span class="token plain"> pgjwt            </span><span class="token keyword" style="color:rgb(86, 156, 214)">with</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> extensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">usage</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">usage</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> extensions </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">user</span><span class="token plain"> supabase_admin </span><span class="token keyword" style="color:rgb(86, 156, 214)">SET</span><span class="token plain"> search_path </span><span class="token keyword" style="color:rgb(86, 156, 214)">TO</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> extensions</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">-- don&#x27;t include the &quot;auth&quot; schema</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> supabase_admin</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> functions </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> supabase_admin</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> sequences </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> supabase_admin</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">tables</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> functions </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> sequences </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">user</span><span class="token plain"> supabase_admin </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> sequences </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">user</span><span class="token plain"> supabase_admin </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">tables</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">default</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">privileges</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">for</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">user</span><span class="token plain"> supabase_admin </span><span class="token operator" style="color:rgb(212, 212, 212)">in</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">schema</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">grant</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">all</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">on</span><span class="token plain"> functions </span><span class="token keyword" style="color:rgb(86, 156, 214)">to</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> anon</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> authenticated</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> service_role</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> role anon </span><span class="token keyword" style="color:rgb(86, 156, 214)">set</span><span class="token plain"> statement_timeout </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;3s&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token keyword" style="color:rgb(86, 156, 214)">alter</span><span class="token plain"> role authenticated </span><span class="token keyword" style="color:rgb(86, 156, 214)">set</span><span class="token plain"> statement_timeout </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;8s&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a class="hash-link" href="#resources" title="Direct link to heading">​</a></h2><ul><li><a href="https://prisma.io" target="_blank" rel="noopener noreferrer">Prisma</a> official website.</li><li><a href="https://github.com/prisma/prisma" target="_blank" rel="noopener noreferrer">Prisma GitHub</a>.</li><li><a href="https://www.prisma.io/docs/" target="_blank" rel="noopener noreferrer">Prisma</a> documentation.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/docs/guides/integrations/prisma.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-1-get-the-connection-string-from-supabase-project-settings" class="table-of-contents__link toc-highlight">Step 1: Get the connection string from Supabase project settings</a></li><li><a href="#step-2-testing-the-connection" class="table-of-contents__link toc-highlight">Step 2: Testing the connection</a><ul><li><a href="#cloning-the-starter-project" class="table-of-contents__link toc-highlight">Cloning the starter project</a></li><li><a href="#a-look-at-the-projects-structure" class="table-of-contents__link toc-highlight">A look at the project’s structure</a></li><li><a href="#configuring-the-project-to-use-postgresql" class="table-of-contents__link toc-highlight">Configuring the project to use PostgreSQL</a></li></ul></li><li><a href="#connection-pooling-with-supabase" class="table-of-contents__link toc-highlight">Connection pooling with Supabase</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Dijets Inc.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.23337c97.js"></script>
<script src="/docs/assets/js/main.57ad0143.js"></script>
</body>
</html>