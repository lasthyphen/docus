<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/integrations/snaplet">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Snaplet | Dijets Council Hub</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="http://127.0.0.1/docs/guides/integrations/snaplet"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Snaplet | Dijets Council Hub"><meta data-rh="true" name="description" content="Get started with Supabase and Snaplet, a developer tool for working with safe, versioned, up-to-date production-like data"><meta data-rh="true" property="og:description" content="Get started with Supabase and Snaplet, a developer tool for working with safe, versioned, up-to-date production-like data"><link data-rh="true" rel="icon" href="/docs/favicon.ico"><link data-rh="true" rel="canonical" href="http://127.0.0.1/docs/guides/integrations/snaplet"><link data-rh="true" rel="alternate" href="http://127.0.0.1/docs/guides/integrations/snaplet" hreflang="en"><link data-rh="true" rel="alternate" href="http://127.0.0.1/docs/guides/integrations/snaplet" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="Dijets Council Hub" href="/docs/opensearch.xml">
<script src="/docs/scripts/telemetry.js"></script><link rel="stylesheet" href="/docs/assets/css/styles.13ffe8e7.css">
<link rel="preload" href="/docs/assets/js/runtime~main.23337c97.js" as="script">
<link rel="preload" href="/docs/assets/js/main.57ad0143.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://council.dijets.io" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/docs/img/supabase-logo-wordmark--light.svg" alt="Dijets Council Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/supabase-logo-wordmark--dark.svg" alt="Dijets Council Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/">Guides</a><a class="navbar__item navbar__link" href="/docs/reference">Reference Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://dips.dijets.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">DIPs Directory</a><a href="https://github.com/Dijets-Inc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-github"></a><a href="https://qowalts.dijets.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-discord"></a><a href="https://twitter.com/OfficialDijets" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-item-twitter"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Snaplet</h1></header><p>This step-by-step guide explains how to use Snaplet to clone your production Supabase project into another development database.</p><p><a href="https://snaplet.dev/" target="_blank" rel="noopener noreferrer">Snaplet</a> is a developer tool that copies a Postgres database, transforming personal information, so that you can <strong>safely code against actual data.</strong> This functionality makes it possible to easily achieve environment parity in Supabase.</p><p>Let&#x27;s get started!</p><p>Follow along in the video below as the founder of Snaplet, Peter Pistorius, takes you through the entire process. Otherwise, you can skip the video and dive into the step-by-step guide.</p><div class="video-container"><iframe src="https://www.youtube.com/embed/oPtMMhdhEP4?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; modestbranding; showinfo=0" width="100%" height="400px"></iframe></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-prerequisites">Step 1: Prerequisites<a class="hash-link" href="#step-1-prerequisites" title="Direct link to heading">​</a></h2><ol><li><strong>A production Supabase project&#x27;s connection string:</strong> These can be found in Supabase via <code>Organization &gt; Project &gt; Database &gt; Connection Pooling &gt; Connection string</code></li><li><strong>A development Supabase project&#x27;s connection string:</strong> Same steps as above, but a different project/environment</li><li><strong>A read-only role</strong> in Production (recommended): This can be done by running the following statements on Supabase via <code>Organization &gt; SQL Editor &gt; + New Query</code></li></ol><blockquote><p>To create a read-only role across all schemas you can checkout the Snaplet <a href="https://docs.snaplet.dev/postgresql/create-read-only-role" target="_blank" rel="noopener noreferrer">docs</a></p></blockquote><ol start="4"><li><strong>Superuser access</strong> for the development project. This can be done in Supabase via <code>Organization &gt; SQL Editor &gt; + New Query</code> and running this statement:
<code>ALTER USER postgres WITH superuser;</code></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-copying-your-production-database">Step 2: Copying your production database<a class="hash-link" href="#step-2-copying-your-production-database" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-connect-your-data-source">2.1. Connect your data source<a class="hash-link" href="#21-connect-your-data-source" title="Direct link to heading">​</a></h3><p>Navigate to <a href="https://www.snaplet.dev/" target="_blank" rel="noopener noreferrer">https://www.snaplet.dev/</a> and sign up for a new account (it’s free). Once you have successfully signed up for a new account, create a team, and start by connecting to your Supabase project.</p><p><img loading="lazy" alt="connect-your-database" src="/docs/assets/images/connect-your-database-6941c538f1c6d78eea2efd5e3f7ba751.png" width="2846" height="1626" class="img_ev3q"></p><p>Enter the credentials of your production Supabase project. Find the &quot;Connection string&quot; in Supabase via <code>Organization &gt; Project &gt; Settings &gt; Database &gt; Connection string</code> (at the bottom of the page).</p><p>The password is the same password you used when creating the Supabase project.</p><p><img loading="lazy" alt="supabase-connection-db-info" src="/docs/assets/images/supabase-connection-db-info-dafc0c4f41cc8d66a121fec5a1b5856e.png" width="2854" height="1622" class="img_ev3q"></p><p>You’ll have to confirm providing Snaplet access to your database. Snaplet will prompt you to only provide <code>read-only</code> access to your database. Snaplet has a guide in their documentation on how to do so <a href="https://docs.snaplet.dev/postgresql/create-read-only-role" target="_blank" rel="noopener noreferrer">here</a>.</p><blockquote><p>Note that whatever connection string you provide here will be that of your Data Source – essentially the production database in a real-life scenario</p></blockquote><p><img loading="lazy" alt="checking-database-credentials" src="/docs/assets/images/checking-database-credentials-ce72194287d3dc0dd41733b98abe849f.png" width="2880" height="1620" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-transform-your-data">2.2. Transform your data<a class="hash-link" href="#22-transform-your-data" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="transform-your-data" src="/docs/assets/images/transform-your-data-a7b767ff625caf5a4f202ebf1b50a6dd.png" width="2844" height="1628" class="img_ev3q"></p><p>The next step is to exclude any schemas that you do not require. You are able to exclude an entire schema by clicking on the drop-down at the top, selecting the schema you would like to exclude and clicking ‘Exclude schema’. Alternatively, you can select a given schema and exclude only specific tables from that particular schema. Exclude any non-required table data (such as logs) and extensions and view your columns.</p><p>At this point, Snaplet will automatically detect any columns that have Personally Identifiable Information (PII) and mark them in purple. If there are any additional columns that hold data you would like to anonymise, you can click on the respective column name and provide a replacement value for the data in that column. To complete the onboarding, click on <code>Review and Save</code> and proceed to the dashboard.</p><p><img loading="lazy" alt="create-your-first-snapshot" src="/docs/assets/images/create-your-first-snapshot-18b1ccc0085e2a61131e99024958eb95.png" width="2880" height="1622" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-create-a-snapshot">2.3. Create a Snapshot<a class="hash-link" href="#23-create-a-snapshot" title="Direct link to heading">​</a></h3><p>Create a snapshot of your production database. This is what you’re going to restore later into your data target (more on that later in the guide).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-pasting-into-your-development-database">Step 3: Pasting into your development database<a class="hash-link" href="#step-3-pasting-into-your-development-database" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-create-a-data-target-on-supabase">3.1. Create a data target on Supabase<a class="hash-link" href="#31-create-a-data-target-on-supabase" title="Direct link to heading">​</a></h3><p>Your data target is where you want Snaplet to restore the captured snapshot of your production project. This would most likely be either your staging or developer Supabase project. If you don’t already have a developer database setup on Supabase, create a new data target by setting up a new project on Supabase. To create a new project, follow the steps below:</p><ol><li>Go to <a href="https://app.supabase.com/" target="_blank" rel="noopener noreferrer">app.supabase.com</a></li><li>Click on “new project”</li><li>Enter your project details</li><li>Wait for the new database to launch</li></ol><blockquote><p>Remember the password you use when creating the project. You’ll need this password to connect your database to Snaplet later.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-make-your-postgres-user-a-superuser">3.2. Make your <code>postgres</code> user a superuser<a class="hash-link" href="#32-make-your-postgres-user-a-superuser" title="Direct link to heading">​</a></h3><p>Snaplet requires the ability to drop the database schemas whilst restoring a snapshot. In order to do that, Snaplet requires <code>superuser</code> privileges.</p><ol><li>Navigate to the <code>SQL Editor</code> in your Supabase console</li><li>Click on <code>new query</code></li><li>Paste <code>alter user postgres with superuser;</code> into the SQL editor</li><li>Run the query</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-install-the-snaplet-cli">3.3. Install the Snaplet CLI<a class="hash-link" href="#33-install-the-snaplet-cli" title="Direct link to heading">​</a></h3><ol><li>Open your terminal and run <code>curl -sL https://app.snaplet.dev/get-cli/ | bash</code></li><li>Run <code>snaplet auth</code></li><li>Navigate to <a href="https://app.snaplet.dev/access-token/cli" target="_blank" rel="noopener noreferrer">https://app.snaplet.dev/access-token/cli</a> to get your access token</li><li>Paste your access token in the terminal</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-restore-to-the-data-target">3.4. Restore to the data target<a class="hash-link" href="#34-restore-to-the-data-target" title="Direct link to heading">​</a></h3><p>You&#x27;re now ready to restore your production snapshot into your Supabase development project.</p><ol><li>Navigate to your project directory</li><li>Run <code>snaplet setup</code> – you will be prompted to enter your database credentials. These are the database credentials of your <strong>data target.</strong> This could be your staging or development database</li></ol><p>Once completed, you will be presented with a list of databases that are connected to your Snaplet account.</p><ol><li>Select a data source from the list</li><li>Run <code>snaplet snapshot restore</code></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="all-done">All done!<a class="hash-link" href="#all-done" title="Direct link to heading">​</a></h2><p>As a Supabase user, you can see how this solves an issue developers all typically experience when attempting to create multiple development environments and populating each of those environments with data that can be worked with. Snaplet simplifies this process down to creating the respective Supabase projects, connecting the data source (The production database) to Snaplet and telling Snaplet where to restore that data (staging and development databases).</p><p>If you want to learn more about Snaplet, you can explore the Snaplet <a href="https://docs.snaplet.dev/" target="_blank" rel="noopener noreferrer">docs</a>. If you have any questions, feel free to <a href="https://discord.com/invite/6HUuajc866" target="_blank" rel="noopener noreferrer">reach out on Discord</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/docs/guides/integrations/snaplet.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#step-1-prerequisites" class="table-of-contents__link toc-highlight">Step 1: Prerequisites</a></li><li><a href="#step-2-copying-your-production-database" class="table-of-contents__link toc-highlight">Step 2: Copying your production database</a><ul><li><a href="#21-connect-your-data-source" class="table-of-contents__link toc-highlight">2.1. Connect your data source</a></li><li><a href="#22-transform-your-data" class="table-of-contents__link toc-highlight">2.2. Transform your data</a></li><li><a href="#23-create-a-snapshot" class="table-of-contents__link toc-highlight">2.3. Create a Snapshot</a></li></ul></li><li><a href="#step-3-pasting-into-your-development-database" class="table-of-contents__link toc-highlight">Step 3: Pasting into your development database</a><ul><li><a href="#31-create-a-data-target-on-supabase" class="table-of-contents__link toc-highlight">3.1. Create a data target on Supabase</a></li><li><a href="#32-make-your-postgres-user-a-superuser" class="table-of-contents__link toc-highlight">3.2. Make your <code>postgres</code> user a superuser</a></li><li><a href="#33-install-the-snaplet-cli" class="table-of-contents__link toc-highlight">3.3. Install the Snaplet CLI</a></li><li><a href="#34-restore-to-the-data-target" class="table-of-contents__link toc-highlight">3.4. Restore to the data target</a></li></ul></li><li><a href="#all-done" class="table-of-contents__link toc-highlight">All done!</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Dijets Inc.</div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.23337c97.js"></script>
<script src="/docs/assets/js/main.57ad0143.js"></script>
</body>
</html>