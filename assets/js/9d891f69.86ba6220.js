"use strict";(self.webpackChunkreference_docs=self.webpackChunkreference_docs||[]).push([[94737],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var o=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),u=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=u(a),d=n,f=p["".concat(l,".").concat(d)]||p[d]||m[d]||r;return a?o.createElement(f,i(i({ref:t},c),{},{components:a})):o.createElement(f,i({ref:t},c))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,i[1]=s;for(var u=2;u<r;u++)i[u]=a[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}d.displayName="MDXCreateElement"},85162:(e,t,a)=>{a.d(t,{Z:()=>i});var o=a(67294),n=a(86010);const r="tabItem_Ymn6";function i(e){let{children:t,hidden:a,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,n.Z)(r,i),hidden:a},t)}},65488:(e,t,a)=>{a.d(t,{Z:()=>d});var o=a(87462),n=a(67294),r=a(86010),i=a(72389),s=a(67392),l=a(7094),u=a(12466);const c="tabList__CuJ",p="tabItem_LNqP";function m(e){const{lazy:t,block:a,defaultValue:i,values:m,groupId:d,className:f}=e,b=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),h=m??b.map((e=>{let{props:{value:t,label:a,attributes:o}}=e;return{value:t,label:a,attributes:o}})),g=(0,s.l)(h,((e,t)=>e.value===t.value));if(g.length>0)throw new Error(`Docusaurus error: Duplicate values "${g.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===i?i:i??b.find((e=>e.props.default))?.props.value??b[0].props.value;if(null!==v&&!h.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${h.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:k}=(0,l.U)(),[N,C]=(0,n.useState)(v),w=[],{blockElementScrollPositionUntilNextRender:T}=(0,u.o5)();if(null!=d){const e=y[d];null!=e&&e!==N&&h.some((t=>t.value===e))&&C(e)}const x=e=>{const t=e.currentTarget,a=w.indexOf(t),o=h[a].value;o!==N&&(T(t),C(o),null!=d&&k(d,String(o)))},O=e=>{let t=null;switch(e.key){case"Enter":x(e);break;case"ArrowRight":{const a=w.indexOf(e.currentTarget)+1;t=w[a]??w[0];break}case"ArrowLeft":{const a=w.indexOf(e.currentTarget)-1;t=w[a]??w[w.length-1];break}}t?.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",c)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},f)},h.map((e=>{let{value:t,label:a,attributes:i}=e;return n.createElement("li",(0,o.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>w.push(e),onKeyDown:O,onClick:x},i,{className:(0,r.Z)("tabs__item",p,i?.className,{"tabs__item--active":N===t})}),a??t)}))),t?(0,n.cloneElement)(b.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},b.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function d(e){const t=(0,i.Z)();return n.createElement(m,(0,o.Z)({key:String(t)},e))}},69499:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>u});var o=a(87462),n=(a(67294),a(3905));a(65488),a(85162);const r={id:"custom-domains",title:"Custom Domains",description:"Configuring a Custom Domain for your Supabase project."},i=void 0,s={unversionedId:"guides/platform/custom-domains",id:"guides/platform/custom-domains",title:"Custom Domains",description:"Configuring a Custom Domain for your Supabase project.",source:"@site/docs/guides/platform/custom-domains.mdx",sourceDirName:"guides/platform",slug:"/guides/platform/custom-domains",permalink:"/docs/guides/platform/custom-domains",draft:!1,editUrl:"https://github.com/docs/guides/platform/custom-domains.mdx",tags:[],version:"current",frontMatter:{id:"custom-domains",title:"Custom Domains",description:"Configuring a Custom Domain for your Supabase project."}},l={},u=[{value:"Configure a Custom Domain",id:"configure-a-custom-domain",level:2},{value:'<a id="cname-configure"></a>Configure a CNAME',id:"configure-a-cname",level:3},{value:"Configure TXT Verification",id:"configure-txt-verification",level:3},{value:"Verify your domain",id:"verify-your-domain",level:3},{value:"Activate your domain",id:"activate-your-domain",level:3},{value:"Remove a Custom Domain",id:"remove-a-custom-domain",level:2}],c={toc:u};function p(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,o.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Custom Domains are currently in beta, and are being slowly made available to projects.")),(0,n.kt)("p",null,"Custom domains allow you to present a branded experience to your users. You can also use a subdomain for the purposes of this guide."),(0,n.kt)("p",null,"To get started:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/docs/guides/cli"},"Install")," the Supabase CLI 1.10.1+."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",{parentName:"li",href:"/docs/guides/cli/local-development#log-in-to-the-supabase-cli"},"Log in")," to your Supabase account using the CLI."),(0,n.kt)("li",{parentName:"ol"},"Enable the Custom Domains add-on in the Billing page of the Dashboard.")),(0,n.kt)("h2",{id:"configure-a-custom-domain"},"Configure a Custom Domain"),(0,n.kt)("p",null,"This example assumes your Supabase project is ",(0,n.kt)("inlineCode",{parentName:"p"},"foobar")," with a corresponding API URL ",(0,n.kt)("inlineCode",{parentName:"p"},"foobar.supabase.co")," and configures a custom domain at ",(0,n.kt)("inlineCode",{parentName:"p"},"api.example.com"),"."),(0,n.kt)("h3",{id:"configure-a-cname"},(0,n.kt)("a",{id:"cname-configure"}),"Configure a CNAME"),(0,n.kt)("p",null,"Set up a CNAME record for ",(0,n.kt)("inlineCode",{parentName:"p"},"api.example.com"),", resolving to ",(0,n.kt)("inlineCode",{parentName:"p"},"foobarbaz.supabase.co."),", with as low a TTL as possible."),(0,n.kt)("h3",{id:"configure-txt-verification"},"Configure TXT Verification"),(0,n.kt)("p",null,"Use the ",(0,n.kt)("inlineCode",{parentName:"p"},"create")," subcommand of the CLI to notify Supabase of your domain and retrieve TXT verification records:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"supabase custom-hostname create --project-ref foobar --custom-hostname api.example.com --experimental\n")),(0,n.kt)("p",null,"The output of the ",(0,n.kt)("inlineCode",{parentName:"p"},"create")," command includes two TXT records",(0,n.kt)("sup",{parentName:"p",id:"fnref-1"},(0,n.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))," you will need to set up, in order to verify your control over the domain in question,\nand for us to issue SSL certificates for it. For example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"[...]\nRequired outstanding validation records:\n        _cf-custom-hostname.api.example.com TXT -> 46BBC14D-D50A-409C-8DB5-F862CF5BA660\n        api.example.com TXT -> ca3-F1HvR9i938OgVwpCFwi1jTsbhe1hvT0Ic3efPY3Q\n")),(0,n.kt)("p",null,(0,n.kt)("sup",{parentName:"p",id:"fnref-1"},(0,n.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))," One of the records requires you to ",(0,n.kt)("em",{parentName:"p"},"replace")," the CNAME record set up in ",(0,n.kt)("a",{parentName:"p",href:"#cname-configure"},"the first step")," with a TXT record. You'll be able to restore it back to the CNAME after the verification process has been completed."),(0,n.kt)("h3",{id:"verify-your-domain"},"Verify your domain"),(0,n.kt)("p",null,"Set up both records as instructed, and then use the ",(0,n.kt)("inlineCode",{parentName:"p"},"reverify")," command for the Supabase Platform to verify the records:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"supabase custom-hostname reverify --project-ref foobarbaz --experimental\n")),(0,n.kt)("p",null,"You might need to wait a few minutes before your updated DNS records are propagated, especially if the older records were using a high TTL."),(0,n.kt)("h3",{id:"activate-your-domain"},"Activate your domain"),(0,n.kt)("p",null,"The final activation step reconfigures your project to start serving traffic on your custom domain (",(0,n.kt)("inlineCode",{parentName:"p"},"api.example.com"),").\nThe auth service, in particular, will no longer work with the original URL (",(0,n.kt)("inlineCode",{parentName:"p"},"foobar.supabase.co"),").\nAs such, it is recommended that you schedule a downtime window of 20-30 minutes, depending on the complexity of your project, to update all the services that need to know about your custom domain:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"any client code (e.g., frontends, mobile apps)"),(0,n.kt)("li",{parentName:"ul"},"any OAuth providers (e.g., google, github)")),(0,n.kt)("p",null,"Additionally, update the DNS configuration for ",(0,n.kt)("inlineCode",{parentName:"p"},"api.example.com")," to once more use a CNAME record that resolves to ",(0,n.kt)("inlineCode",{parentName:"p"},"foobarbaz.supabase.co"),".\nFinally, you can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"activate")," subcommand to reconfigure your project:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"supabase custom-hostname activate --project-ref foobarbaz --experimental\n")),(0,n.kt)("h2",{id:"remove-a-custom-domain"},"Remove a Custom Domain"),(0,n.kt)("p",null,"If you have a custom domain (",(0,n.kt)("inlineCode",{parentName:"p"},"api.example.com"),") set up for your Supabase project (ref ",(0,n.kt)("inlineCode",{parentName:"p"},"foobarbaz"),", with assigned endpoints at ",(0,n.kt)("inlineCode",{parentName:"p"},"foobarbaz.supabase.co"),"), and would like to go back to using the Supabase-provisioned endpoints (",(0,n.kt)("inlineCode",{parentName:"p"},"foobarbaz.supabase.co"),"), you can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"delete")," subcommand:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"supabase custom-hostname delete --project-ref foobarbaz --experimental\n")),(0,n.kt)("p",null,"As with the final activation stage of the process for setting up a custom domain, you'll need to update any references in your client code and OAuth providers from the custom domain to the Supabase-provisioned endpoints."))}p.isMDXComponent=!0}}]);