"use strict";(self.webpackChunkreference_docs=self.webpackChunkreference_docs||[]).push([[52226],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var r=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,n=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(a),m=o,k=c["".concat(s,".").concat(m)]||c[m]||d[m]||n;return a?r.createElement(k,i(i({ref:t},u),{},{components:a})):r.createElement(k,i({ref:t},u))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var n=a.length,i=new Array(n);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<n;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},93217:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>n,metadata:()=>l,toc:()=>p});var r=a(87462),o=(a(67294),a(3905));const n={id:"heroku",title:"Migrate from Heroku to Supabase",description:"Migrate your Heroku Postgres database to Supabase.",sidebar_label:"Heroku"},i=void 0,l={unversionedId:"guides/migrations/heroku",id:"guides/migrations/heroku",title:"Migrate from Heroku to Supabase",description:"Migrate your Heroku Postgres database to Supabase.",source:"@site/docs/guides/migrations/heroku.mdx",sourceDirName:"guides/migrations",slug:"/guides/migrations/heroku",permalink:"/docs/guides/migrations/heroku",draft:!1,editUrl:"https://github.com/docs/guides/migrations/heroku.mdx",tags:[],version:"current",frontMatter:{id:"heroku",title:"Migrate from Heroku to Supabase",description:"Migrate your Heroku Postgres database to Supabase.",sidebar_label:"Heroku"}},s={},p=[{value:"Quick demo",id:"quick-demo",level:2},{value:"Retrieve your Heroku database credentials",id:"retrieve-heroku-credentials",level:2},{value:"Retrieve your Supabase Host",id:"retrieve-supabase-host",level:2},{value:"Export your Heroku database to a file",id:"export-heroku-database",level:2},{value:"Import the database to your Supabase project",id:"import-database-to-supabase",level:2},{value:"(Optional) Post processing",id:"post-processing",level:2},{value:"Additional options",id:"additional-options",level:2}],u={toc:p};function c(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Supabase is one of the best ",(0,o.kt)("a",{parentName:"p",href:"https://supabase.com/alternatives/supabase-vs-heroku-postgres"},"free alternatives to Heroku Postgres"),". This guide shows how to migrate your Heroku Postgres database to Supabase. This migration requires the ",(0,o.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/app-pgdump.html"},"pg_dump")," and ",(0,o.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/app-psql.html"},"psql")," CLI tools, which are installed automatically as part of the complete PostgreSQL installation package."),(0,o.kt)("p",null,"Alternatively, use the ",(0,o.kt)("a",{parentName:"p",href:"https://migrate.supabase.com/"},"Heroku to Supabase migration tool")," to migrate in just a few clicks."),(0,o.kt)("h2",{id:"quick-demo"},"Quick demo"),(0,o.kt)("div",{class:"video-container"},(0,o.kt)("iframe",{src:"https://www.youtube-nocookie.com/embed/xsRhPMphtZ4",frameBorder:"1",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),(0,o.kt)("h2",{id:"retrieve-heroku-credentials"},"Retrieve your Heroku database credentials"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Log in to your ",(0,o.kt)("a",{parentName:"li",href:"https://heroku.com"},"Heroku account")," and select the project you want to migrate."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Resources")," in the menu and select your ",(0,o.kt)("strong",{parentName:"li"},"Heroku Postgres")," database."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Settings")," in the menu."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"View Credentials")," and save the following information:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Host (",(0,o.kt)("inlineCode",{parentName:"li"},"$HEROKU_HOST"),")"),(0,o.kt)("li",{parentName:"ul"},"Database (",(0,o.kt)("inlineCode",{parentName:"li"},"$HEROKU_DATABASE"),")"),(0,o.kt)("li",{parentName:"ul"},"User (",(0,o.kt)("inlineCode",{parentName:"li"},"$HEROKU_USER"),")"),(0,o.kt)("li",{parentName:"ul"},"Password (",(0,o.kt)("inlineCode",{parentName:"li"},"$HEROKU_PASSWORD"),")")))),(0,o.kt)("h2",{id:"retrieve-supabase-host"},"Retrieve your Supabase Host"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"If you're new to Supabase, ",(0,o.kt)("a",{parentName:"li",href:"https://app.supabase.com"},"create a project"),"."),(0,o.kt)("li",{parentName:"ol"},"Go to the ",(0,o.kt)("a",{parentName:"li",href:"https://app.supabase.com/project/_/settings/database"},"Database settings")," for your project in the Supabase Dashboard."),(0,o.kt)("li",{parentName:"ol"},"Under ",(0,o.kt)("strong",{parentName:"li"},"Connection Info"),", note your Host (",(0,o.kt)("inlineCode",{parentName:"li"},"$SUPABASE_HOST"),").")),(0,o.kt)("h2",{id:"export-heroku-database"},"Export your Heroku database to a file"),(0,o.kt)("p",null,"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"pg_dump")," with your Heroku credentials to export your Heroku database to a file (e.g., ",(0,o.kt)("inlineCode",{parentName:"p"},"heroku_dump.sql"),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"pg_dump --clean --if-exists --quote-all-identifiers \\\n -h $HEROKU_HOST -U $HEROKU_USER -d $HEROKU_DATABASE \\\n --no-owner --no-privileges > heroku_dump.sql\n")),(0,o.kt)("h2",{id:"import-database-to-supabase"},"Import the database to your Supabase project"),(0,o.kt)("p",null,"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"psql")," to import the Heroku database file to your Supabase project."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"psql -h $SUPABASE_HOST -U postgres -f heroku_dump.sql\n")),(0,o.kt)("h2",{id:"post-processing"},"(Optional) Post processing"),(0,o.kt)("p",null,"If you're using GraphQL with your Supabase project, you may need to run the following SQL command in the Supabase Dashboard (SQL Editor) to make sure the new tables show up:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"select graphql.rebuild_schema();\n")),(0,o.kt)("h2",{id:"additional-options"},"Additional options"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"To only migrate a single database schema, add the ",(0,o.kt)("inlineCode",{parentName:"li"},"--schema=PATTERN")," parameter to your ",(0,o.kt)("inlineCode",{parentName:"li"},"pg_dump")," command."),(0,o.kt)("li",{parentName:"ul"},"To exclude a schema: ",(0,o.kt)("inlineCode",{parentName:"li"},"--exclude-schema=PATTERN"),"."),(0,o.kt)("li",{parentName:"ul"},"To only migrate a single table: ",(0,o.kt)("inlineCode",{parentName:"li"},"--table=PATTERN"),"."),(0,o.kt)("li",{parentName:"ul"},"To exclude a table: ",(0,o.kt)("inlineCode",{parentName:"li"},"--exclude-table=PATTERN"),".")),(0,o.kt)("p",null,"Run ",(0,o.kt)("inlineCode",{parentName:"p"},"pg_dump --help")," for a full list of options."))}c.isMDXComponent=!0}}]);