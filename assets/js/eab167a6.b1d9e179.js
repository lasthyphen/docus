"use strict";(self.webpackChunkreference_docs=self.webpackChunkreference_docs||[]).push([[54655],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>g});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),u=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},l="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,s=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),l=u(a),m=n,g=l["".concat(p,".").concat(m)]||l[m]||d[m]||s;return a?r.createElement(g,o(o({ref:t},c),{},{components:a})):r.createElement(g,o({ref:t},c))}));function g(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var s=a.length,o=new Array(s);o[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[l]="string"==typeof e?e:n,o[1]=i;for(var u=2;u<s;u++)o[u]=a[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},90070:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>u});var r=a(87462),n=(a(67294),a(3905));const s={id:"disk-usage",title:"Disk space usage",description:"Learn how database disk space usage is reported."},o=void 0,i={unversionedId:"guides/platform/disk-usage",id:"guides/platform/disk-usage",title:"Disk space usage",description:"Learn how database disk space usage is reported.",source:"@site/docs/guides/platform/disk-usage.mdx",sourceDirName:"guides/platform",slug:"/guides/platform/disk-usage",permalink:"/docs/guides/platform/disk-usage",draft:!1,editUrl:"https://github.com/docs/guides/platform/disk-usage.mdx",tags:[],version:"current",frontMatter:{id:"disk-usage",title:"Disk space usage",description:"Learn how database disk space usage is reported."}},p={},u=[{value:"Vacuum operations",id:"vacuum-operations",level:2}],c={toc:u};function l(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Database disk space usage refers to the ",(0,n.kt)("em",{parentName:"p"},"monthly average disk usage"),", as reported by Postgres. This metric is reported in your project's ",(0,n.kt)("a",{parentName:"p",href:"https://app.supabase.com/project/_/settings/billing"},"billing page")," and is updated daily."),(0,n.kt)("p",null,"For an instantaneous live view of the DB disk space being used by your project, you can execute in Postgres:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT SUM(pg_database_size(pg_database.datname)) / (1024 * 1024) as db_size_mb FROM pg_database;\n")),(0,n.kt)("p",null,"This value is also reported in the ",(0,n.kt)("a",{parentName:"p",href:"https://app.supabase.com/project/_/settings/database"},"database settings page"),"."),(0,n.kt)("h2",{id:"vacuum-operations"},"Vacuum operations"),(0,n.kt)("p",null,"Postgres does not immediately reclaim the physical space used by dead tuples (i.e., deleted rows) in the DB. Instead, they are internally marked as removed until a ",(0,n.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/routine-vacuuming.html"},"vacuum operation")," is executed. As a result, deleting data from your DB may not immediately reduce the reported disk usage."),(0,n.kt)("admonition",{type:"note"},(0,n.kt)("p",{parentName:"admonition"},"Vacuum operations can temporarily increase resource utilization, which can adversely impact the observed performance of your project until the maintenance is completed.")),(0,n.kt)("p",null,"Supabase projects have automatic vacuuming enabled, which ensures that these operations are performed regularly to keep the database healthy and performant. However, it can be necessary to either ",(0,n.kt)("a",{parentName:"p",href:"https://www.percona.com/blog/2018/08/10/tuning-autovacuum-in-postgresql-and-autovacuum-internals/"},"fine-tune")," ",(0,n.kt)("a",{parentName:"p",href:"https://www.enterprisedb.com/blog/postgresql-vacuum-and-analyze-best-practice-tips"},"the autovacuum parameters"),", or ",(0,n.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/sql-vacuum.html"},"manually initiate")," vacuum operations. For example, running a manual vacuum after deleting large amounts of data from your DB could help reduce the reported disk usage by Postgres."))}l.isMDXComponent=!0}}]);