"use strict";(self.webpackChunkreference_docs=self.webpackChunkreference_docs||[]).push([[56447],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),l=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(u.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=l(n),d=r,f=p["".concat(u,".").concat(d)]||p[d]||m[d]||o;return n?a.createElement(f,i(i({ref:t},c),{},{components:n})):a.createElement(f,i({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},42805:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=n(87462),r=(n(67294),n(3905));const o={id:"timeouts",title:"Timeouts",description:"Timeouts and optimization"},i=void 0,s={unversionedId:"guides/database/timeouts",id:"guides/database/timeouts",title:"Timeouts",description:"Timeouts and optimization",source:"@site/docs/guides/database/timeouts.mdx",sourceDirName:"guides/database",slug:"/guides/database/timeouts",permalink:"/docs/guides/database/timeouts",draft:!1,editUrl:"https://github.com/docs/guides/database/timeouts.mdx",tags:[],version:"current",frontMatter:{id:"timeouts",title:"Timeouts",description:"Timeouts and optimization"}},u={},l=[{value:"Changing the default timeout",id:"changing-the-default-timeout",level:3},{value:"Statement Optimization",id:"statement-optimization",level:3}],c={toc:l};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"By default, Supabase limits the maximum statement execution time to ",(0,r.kt)("em",{parentName:"p"},"3 seconds")," for users accessing the API using the anon key, and ",(0,r.kt)("em",{parentName:"p"},"8 seconds")," for authenticated users. Additionally, all users are subject to a global limit of ",(0,r.kt)("em",{parentName:"p"},"2 minutes"),". This serves as a backstop against resource exhaustion due to either poorly written queries, or abusive usage."),(0,r.kt)("h3",{id:"changing-the-default-timeout"},"Changing the default timeout"),(0,r.kt)("p",null,"The timeout values were picked as a reasonable default for the majority of use-cases, but can be modified using the ",(0,r.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/sql-alterrole.html"},(0,r.kt)("inlineCode",{parentName:"a"},"alter role"))," statement:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"alter role authenticated set statement_timeout = '15s';\n")),(0,r.kt)("p",null,"You can also update the statement timeout for a session:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"set statement_timeout to 60000; -- 1 minute in milliseconds\n")),(0,r.kt)("h3",{id:"statement-optimization"},"Statement Optimization"),(0,r.kt)("p",null,"All Supabase projects come with the ",(0,r.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/pgstatstatements.html"},(0,r.kt)("inlineCode",{parentName:"a"},"pg_stat_statements"))," extension installed, which tracks planning and execution statistics for all statements executed against it. These statistics can be used in order to diagnose the performance of your project."),(0,r.kt)("p",null,"This data can further be used in conjunction with the ",(0,r.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/current/using-explain.html"},(0,r.kt)("inlineCode",{parentName:"a"},"explain"))," functionality of Postgres to optimize your usage."))}p.isMDXComponent=!0}}]);