"use strict";(self.webpackChunkreference_docs=self.webpackChunkreference_docs||[]).push([[32557],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>f});var r=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(a),m=o,f=d["".concat(l,".").concat(m)]||d[m]||c[m]||i;return a?r.createElement(f,n(n({ref:t},u),{},{components:a})):r.createElement(f,n({ref:t},u))}));function f(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,n=new Array(i);n[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,n[1]=s;for(var p=2;p<i;p++)n[p]=a[p];return r.createElement.apply(null,n)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},15229:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=a(87462),o=(a(67294),a(3905));const i={id:"firebase-storage",title:"Firebase Storage Migration",description:"Migrate Firebase Storage files to Supabase Storage.",sidebar_label:"Firebase Storage"},n=void 0,s={unversionedId:"guides/migrations/firebase-storage",id:"guides/migrations/firebase-storage",title:"Firebase Storage Migration",description:"Migrate Firebase Storage files to Supabase Storage.",source:"@site/docs/guides/migrations/firebase-storage.mdx",sourceDirName:"guides/migrations",slug:"/guides/migrations/firebase-storage",permalink:"/docs/guides/migrations/firebase-storage",draft:!1,editUrl:"https://github.com/docs/guides/migrations/firebase-storage.mdx",tags:[],version:"current",frontMatter:{id:"firebase-storage",title:"Firebase Storage Migration",description:"Migrate Firebase Storage files to Supabase Storage.",sidebar_label:"Firebase Storage"}},l={},p=[{value:"Set up the migration tool",id:"set-up-migration-tool",level:2},{value:"Generate a Firebase private key",id:"generate-firebase-private-key",level:2},{value:"Command line options",id:"command-line-options",level:2},{value:"Download Firestore Storage bucket to a local filesystem folder",id:"download-firestore-storage-bucket",level:3},{value:"Upload files to Supabase Storage bucket",id:"upload-to-supabase-storage-bucket",level:3},{value:"Resources",id:"resources",level:2}],u={toc:p};function d(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Supabase provides several ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/supabase-community/firebase-to-supabase/tree/main/storage"},"tools")," to convert storage files from Firebase Storage to Supabase Storage. Conversion is a two-step process:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Files are downloaded from a Firebase storage bucket to a local filesystem."),(0,o.kt)("li",{parentName:"ol"},"Files are uploaded from the local filesystem to a Supabase storage bucket.")),(0,o.kt)("h2",{id:"set-up-migration-tool"},"Set up the migration tool"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Clone the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/supabase-community/firebase-to-supabase"},"firebase-to-supabase")," repository:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone https://github.com/supabase-community/firebase-to-supabase.git\n")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In the ",(0,o.kt)("inlineCode",{parentName:"li"},"/storage")," directory, rename ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/supabase-community/firebase-to-supabase/blob/main/storage/supabase-keys-sample.js"},"supabase-keys-sample.js")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"supabase-keys.js"),"."),(0,o.kt)("li",{parentName:"ol"},"Go to your Supabase project's ",(0,o.kt)("a",{parentName:"li",href:"https://app.supabase.com/project/_/settings/api"},"API settings")," in the Dashboard."),(0,o.kt)("li",{parentName:"ol"},"Copy the ",(0,o.kt)("strong",{parentName:"li"},"Project URL")," and update the ",(0,o.kt)("inlineCode",{parentName:"li"},"SUPABASE_URL")," value in ",(0,o.kt)("inlineCode",{parentName:"li"},"supabase-keys.js"),"."),(0,o.kt)("li",{parentName:"ol"},"Under ",(0,o.kt)("strong",{parentName:"li"},"Project API keys"),", copy the ",(0,o.kt)("strong",{parentName:"li"},"service_role")," key and update the ",(0,o.kt)("inlineCode",{parentName:"li"},"SUPABASE_KEY")," value in ",(0,o.kt)("inlineCode",{parentName:"li"},"supabase-keys.js"),".")),(0,o.kt)("h2",{id:"generate-firebase-private-key"},"Generate a Firebase private key"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Log in to your ",(0,o.kt)("a",{parentName:"li",href:"https://console.firebase.google.com/project"},"Firebase Console")," and open your project."),(0,o.kt)("li",{parentName:"ol"},"Click the gear icon next to ",(0,o.kt)("strong",{parentName:"li"},"Project Overview")," in the sidebar and select ",(0,o.kt)("strong",{parentName:"li"},"Project Settings"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Service Accounts")," and select ",(0,o.kt)("strong",{parentName:"li"},"Firebase Admin SDK"),"."),(0,o.kt)("li",{parentName:"ol"},"Click ",(0,o.kt)("strong",{parentName:"li"},"Generate new private key"),"."),(0,o.kt)("li",{parentName:"ol"},"Rename the downloaded file to ",(0,o.kt)("inlineCode",{parentName:"li"},"firebase-service.json"),".")),(0,o.kt)("h2",{id:"command-line-options"},"Command line options"),(0,o.kt)("h3",{id:"download-firestore-storage-bucket"},"Download Firestore Storage bucket to a local filesystem folder"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"node download.js <prefix> [<folder>] [<batchSize>] [<limit>] [<token>]")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<prefix>"),': The prefix of the files to download. To process the root bucket, use an empty prefix: "".'),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<folder>"),": (optional) Name of subfolder for downloaded files. The selected folder is created as a subfolder of the current folder (e.g., ",(0,o.kt)("inlineCode",{parentName:"li"},"./downloads/"),"). The default is ",(0,o.kt)("inlineCode",{parentName:"li"},"downloads"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<batchSize>"),": (optional) The default is 100."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<limit>"),": (optional) Stop after processing this many files. For no limit, use ",(0,o.kt)("inlineCode",{parentName:"li"},"0"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<token>"),": (optional) Begin processing at this pageToken.")),(0,o.kt)("p",null,"To process in batches using multiple command-line executions, you must use the same parameters with a new ",(0,o.kt)("inlineCode",{parentName:"p"},"<token>")," on subsequent calls. Use the token displayed on the last call to continue the process at a given point."),(0,o.kt)("h3",{id:"upload-to-supabase-storage-bucket"},"Upload files to Supabase Storage bucket"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"node upload.js <prefix> <folder> <bucket>")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<prefix>"),': The prefix of the files to download. To process all files, use an empty prefix: "".'),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<folder>"),": Name of subfolder of files to upload. The selected folder is read as a subfolder of the current folder (e.g., ",(0,o.kt)("inlineCode",{parentName:"li"},"./downloads/"),"). The default is ",(0,o.kt)("inlineCode",{parentName:"li"},"downloads"),"."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<bucket>"),": Name of the bucket to upload to.")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If the bucket doesn't exist, it's created as a ",(0,o.kt)("inlineCode",{parentName:"p"},"non-public")," bucket. You must set permissions on this new bucket in the ",(0,o.kt)("a",{parentName:"p",href:"https://app.supabase.com/project/_/storage/buckets"},"Supabase Dashboard")," before users can download any files.")),(0,o.kt)("h2",{id:"resources"},"Resources"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://supabase.com/alternatives/supabase-vs-firebase"},"Supabase vs Firebase")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://supabase.com/docs/guides/migrations/firestore-data"},"Firestore Data Migration")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://supabase.com/docs/guides/migrations/firebase-auth"},"Firebase Auth Migration"))))}d.isMDXComponent=!0}}]);